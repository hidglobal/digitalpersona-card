{"version":3,"file":"test.esm.js","sources":["../node_modules/@digitalpersona/card/dist/es6.bundles/index.esm.js","../index.js"],"sourcesContent":["class ApiError extends Error {\n  constructor(message, code) {\n    super(message);\n    this.code = void 0;\n    this.name = \"dp.card.ApiError\";\n    this.code = code;\n  }\n}\n\nvar _Utf2, _Base, _Base64Url;\n/**\n * Set of converters to UTF16.\n */\nclass Utf16 {}\n/**\n * Set of converters to UTF8.\n */\n// /** Converts a UTF8 string to a UTF16 string. */\n// public static fromUtf8 = (s: Utf8String): Utf16String =>\n//     decodeURIComponent(escape(Utf8.noBom(s)))\n// /** Decodes a Base64-encoded string to a UTF16 string. */\n// public static fromBase64 = (s: Base64String): Utf16String =>\n//     Utf16.fromUtf8(Utf8.fromBase64(s))\n// /** Decodes a Base64url-encoded string to a UTF16 string. */\n// public static fromBase64Url = (s: Base64UrlString): Utf16String =>\n//     Utf16.fromUtf8(Utf8.fromBase64Url(s))\n// /** Appends Byte-Order-Mark (BOM) to the UTF16 string. */\n// public static withBom   = (s: Utf16String): Utf16String =>\n//     \"\\uFEFF\" + s\n/** Strips a Byte-Order-Mark (BOM) from the UTF16 string. */\nUtf16.noBom = s => s.replace(/^\\uFEFF/, \"\");\nclass Utf8 {}\n/**\n * Set of converters to Base64.\n */\n_Utf2 = Utf8;\n/** Converts a UTF16 string to a UTF8 string. */\nUtf8.fromUtf16 = s => unescape(encodeURIComponent(Utf16.noBom(s)));\n/** Decodes a Base64-encoded string to a UTF8 string. */\nUtf8.fromBase64 = s => atob(s);\n/** Decodes a Base64url-encoded string to a UTF8 string. */\nUtf8.fromBase64Url = s => _Utf2.fromBase64(Base64.fromBase64Url(s));\nclass Base64 {}\n/**\n * Set of converters to Base64Url.\n */\n_Base = Base64;\n/** Encodes a UTF8 string to a Base64-encoded string. */\nBase64.fromUtf8 = s => btoa(s);\n/** Encodes a UTF16 string to a Base64-encoded string.  */\nBase64.fromUtf16 = s => _Base.fromUtf8(Utf8.fromUtf16(s));\n/** Converts a Base64url-encoded string to a Base64-encoded string. */\nBase64.fromBase64Url = s => (s.length % 4 === 2 ? s + \"==\" : s.length % 4 === 3 ? s + \"=\" : s).replace(/-/g, \"+\").replace(/_/g, \"/\");\nclass Base64Url {}\n_Base64Url = Base64Url;\n/** Converts a Base64-encoded string to a Base64url-encoded string. */\nBase64Url.fromBase64 = s => s.replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n// /** Converts a UTF8 string to a Base64url-encoded string. */\n// public static fromUtf8 = (s: Utf8String) =>\n//     Base64Url.fromBase64(Base64.fromUtf8(s))\n/** Converts a UTF16 string to a Base64url-encoded string. */\nBase64Url.fromUtf16 = s => _Base64Url.fromBase64(Base64.fromUtf16(s));\n// /** Converts a byte array to a Base64url-encoded string. */\n// public static fromBytes = (bytes: Uint8Array): Base64UrlString =>\n//     Base64Url.fromUtf8(Utf8.fromBytes(bytes))\n/** Encodes a plain JSON object or a string to a Base64url-encoded string. */\nBase64Url.fromJSON = obj => _Base64Url.fromUtf16(JSON.stringify(obj));\n\n/**@internal\n *\n */\nconst MessageType = {\n  Reply: 0,\n  // Notification        : 1,\n  AsyncNotification: 2\n};\n/**@internal\n *\n */\nconst MethodType = {\n  // EnumerateReaders        : 1,\n  // EnumerateCards          : 2,\n  // GetCardInfo             : 3,\n  // GetCardUID              : 4,\n  // GetCardAuthData         : 5,\n  // GetCardEnrollData       : 6,\n  GetCardDataEx: 10,\n  GetCardCancel: 11\n  // Subscribe               : 100,\n  // Unsubscribe             : 101,\n};\n/**@internal\n * Card SDK request DTO\n */\nclass Command {\n  constructor(method, params) {\n    this.Method = void 0;\n    this.Parameters = void 0;\n    this.Method = method;\n    if (params) this.Parameters = Base64Url.fromJSON(params);\n  }\n}\n/**@internal\n * Card SDK reply codes\n */\nconst ReplyCode = {\n  Ok: 0x00000000,\n  Cancelled: 0x800704c7\n};\n\n///<reference types=\"WebSdk\" />\n/**@public\n * Captures card data\n *\n * @param purpose   The purpose of card data collection (enrollment or authentication)\n * @param options   Optional parameters\n * @returns Promise of a `CaptureResult` object\n *\n * @example Capture auth data from any card, no feedback, no cancellation, default timeout\n *\n *  const cardData = await capture(\"auth\")\n *  const authToken = authenticate(cardData)\n *\n * @example Capture enroll data from Contactless Writable cards, with feedback and cancellation, custom timeout of 3 min\n *\n * captureButton.onclick = async() => {\n *      const ac = new AbortController();\n *      try {\n *          // prepare a cancel button\n *          cancelButton.onclick = () => ac.abort()\n *\n *          const cardData = await capture(\"enroll\", {\n *              cardType: \"CW\",\n *              signal: ac.signal,\n *              onFeedback: updateFeedbackView,\n *              timeout: 3*60\n *          });\n *          const enrolled = await enroll(cardData)\n *      }\n *      catch(e) {\n *          updateErrorView(e)\n *      } finally {\n *          cancelButton.onclick = null\n *      }\n * }\n *\n *\n */\nfunction capture(purpose, options) {\n  var _options$signal;\n  // validate input\n  if (!purpose) return Promise.reject(new Error(\"dp.card.capture.purpose.empty\"));\n  if (options != null && (_options$signal = options.signal) != null && _options$signal.aborted) return Promise.reject(new ApiError(\"Aborted\"));\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  const log = options != null && options.debug ? console.log : () => {};\n  log(\"==>capture()\", purpose, options);\n  return new Promise((resolve, reject) => {\n    try {\n      var _options$inactivityTi;\n      // an exception-safe feedback handler wrapper\n      const onFeedback = feedback => {\n        if (options != null && options.onFeedback) try {\n          options.onFeedback(feedback);\n        } catch (e) {\n          log(`Exception thrown in 'dp.card.capture.onFeedback': ${e || \"n/a\"}`);\n        }\n      };\n      const channel = new WebSdk.WebChannelClient(\"smartcards\", options == null ? void 0 : options.channelOptions);\n      // WORKAROUND! WebSdk caches SRP/session data, which causes issues with ADC upgrades. Clean it.\n      // sessionStorage.removeItem(\"websdk\")\n      // sessionStorage.removeItem(\"websdk.sessionId\")\n      // NOTE: the Date.now() is not monotonic and may revert back on system time changes.\n      // To avoid negative timeout intervals, use the Performance API everywhere.\n      let lastActivity = performance.now();\n      let aborting = false;\n      // register a new activity, after checking we're still good to go\n      const bump = () => {\n        var _options$signal2;\n        if (!aborting && options != null && (_options$signal2 = options.signal) != null && _options$signal2.aborted) abort();\n        lastActivity = performance.now();\n      };\n      // transient states\n      const connect = () => {\n        bump();\n        log(\"connecting...\");\n        channel.connect(1);\n      };\n      const send = command => {\n        bump();\n        log(\"sending...\", command);\n        channel.sendDataTxt(Base64Url.fromJSON(command));\n      };\n      // terminal states; USE ONLY THOSE TO RESOLVE/REJECT!\n      const done = value => {\n        reset();\n        log(\"<==capture(): done\", value);\n        resolve(value);\n      };\n      const fail = (message, code) => {\n        reset();\n        log(\"<==capture(): fail\", message, code);\n        reject(new ApiError(message, code));\n      };\n      const abort = () => {\n        aborting = true;\n        send(new Command(MethodType.GetCardCancel));\n        fail(\"Aborted\");\n      };\n      // cleanup for terminal states\n      const reset = () => {\n        // TODO: `disconnect` does not stop multiply reconnection attempts and we still receive multiple onConnecctionFailed().\n        // Needs a fix in WebSdk (add an `attempts` parameter to the `WebSdkChannel.connect()` and pass 1).\n        channel.disconnect();\n        window.clearTimeout(watchdog);\n      };\n      const onConnectionFailed = () => fail(\"BadConnection\");\n      const onConnectionSucceed = () => send(new Command(MethodType.GetCardDataEx, {\n        Version: 2,\n        Case: purpose,\n        Type: options == null ? void 0 : options.cardType\n      }));\n      const onDataReceivedTxt = data => {\n        var _res$Data;\n        bump();\n        const {\n          Type,\n          Data\n        } = decodeAs(data);\n        switch (Type) {\n          case MessageType.Reply:\n            {\n              var _res$Result;\n              const res = decodeAs(Data);\n              log(\"Got reply\", res);\n              if (!res || res.Method !== MethodType.GetCardDataEx) return; // silently ignore unexpected replies\n              const code = unsigned((_res$Result = res == null ? void 0 : res.Result) != null ? _res$Result : 0);\n              switch (code) {\n                case ReplyCode.Ok:\n                  {\n                    if (res.Data) return done(JSON.parse(res.Data));\n                    break;\n                  }\n                case ReplyCode.Cancelled:\n                  return abort();\n                default:\n                  if (code > 0x7FFFFFFF) return fail((_res$Data = res.Data) != null ? _res$Data : \"BadResponse\", code);\n                // TODO: does \"BadVersion\" occurs here too?\n              }\n              // we're fine, proceed\n              break;\n            }\n          // case MessageType.Notification: {\n          //     // Not interested in regular notifications here\n          //     break\n          // }\n          case MessageType.AsyncNotification:\n            {\n              const res = decodeAs(Data);\n              log(\"Got async note\", res);\n              if (res) try {\n                onFeedback(res);\n              } catch (e) {\n                log(\"Feedback handler has thrown.\", e);\n              }\n              break;\n            }\n          default:\n            log(`Unknown response type: ${Type}`);\n        }\n      };\n      channel.onConnectionSucceed = onConnectionSucceed;\n      channel.onConnectionFailed = onConnectionFailed;\n      channel.onDataReceivedTxt = onDataReceivedTxt;\n      onFeedback({\n        message: \"Starting\"\n      });\n      connect();\n      const timeout = ((_options$inactivityTi = options == null ? void 0 : options.inactivityTimeout) != null ? _options$inactivityTi : Number.POSITIVE_INFINITY) * 1000;\n      const watchdogInterval = 200;\n      // Run a watchdog timer to watch for abort signal and timouts.\n      // Note: using safer recursive setTimeout instead of setInterval to guarantee\n      // execution time never gets longer than the timer interval\n      //\n      // TODO: in web extensions, the `setTimeout` may not work reliably;\n      // extensions should use `alarms` API.\n      let watchdog = window.setTimeout(function check() {\n        var _options$signal3;\n        if (options != null && (_options$signal3 = options.signal) != null && _options$signal3.aborted) return abort();\n        if (performance.now() - lastActivity > timeout) return fail(\"Timeout\");\n        watchdog = window.setTimeout(check, watchdogInterval);\n      }, watchdogInterval);\n    } catch (error) {\n      if (error instanceof Error) reject(error);else reject(new Error(`UnknowError: ${error}`));\n    }\n  });\n}\nfunction unsigned(n) {\n  return n >>> 0;\n}\nfunction decodeAs(data) {\n  return JSON.parse(Utf8.fromBase64Url(data != null ? data : \"\"));\n}\n\nexport { ApiError, capture };\n//# sourceMappingURL=index.esm.js.map\n","import { capture } from \"@digitalpersona/card\"\r\n// const { capture } = dp.card;\r\n\r\n\r\nconst form = /** @type {!HTMLFormElement} */\r\n    (document.getElementById('capture'));\r\n\r\nconst startButton = /** @type {!HTMLButtonElement} */\r\n    (document.getElementById('start'));\r\nconst cancelButton  = /** @type {!HTMLButtonElement} */\r\n    (document.getElementById('cancel'));\r\nconst feedbackView = /** @type {!HTMLDivElement} */\r\n    (document.getElementById('feedback'));\r\nconst errorView = /** @type {!HTMLDivElement} */\r\n    (document.getElementById('error'));\r\nconst resultView = /** @type {!HTMLDivElement} */\r\n    (document.getElementById('result'));\r\nconst rawMessages = /** @type {!HTMLInputElement} */\r\n    (document.getElementById('rawMessages'));\r\n\r\n// [Capture] button click handler\r\nstartButton.onclick = async () =>\r\n{\r\n    const ac = new AbortController();\r\n\r\n    try {\r\n        resultView.innerText = \"\"\r\n\r\n        setCaptureActive(true, ac);\r\n        updateFeedbackView()\r\n        updateErrorView()\r\n\r\n        const data = await capture(form.purpose.value, {\r\n            cardType: form.cardType.value,\r\n            signal: ac.signal,\r\n            onFeedback: updateFeedbackView,\r\n            channelOptions: { debug: true },\r\n            debug: true\r\n        });\r\n\r\n        resultView.innerText = JSON.stringify(data, null, 2)\r\n    }\r\n    catch(e) {\r\n        updateErrorView(e);\r\n    }\r\n    finally {\r\n        setCaptureActive(false);\r\n        updateFeedbackView()\r\n    }\r\n};\r\n\r\n// Update state of [Capture] and [Cancel] buttons in a consistent way,\r\n// and attach a cancellation handler.\r\nfunction setCaptureActive(capturing, ac)\r\n{\r\n    form?.classList.toggle('started', capturing)\r\n    startButton.disabled = capturing;\r\n    cancelButton.disabled = !capturing;\r\n    cancelButton.onclick = (capturing && ac) ?\r\n        () => ac.abort() : null\r\n}\r\n\r\n// Update a user feedback view\r\nfunction updateFeedbackView(feedback) {\r\n    feedbackView.hidden = !feedback;\r\n    feedbackView.innerText = translate(feedback) || '';\r\n}\r\n\r\n// Update an error view\r\nfunction updateErrorView(error) {\r\n    errorView.hidden = !error;\r\n    errorView.innerText = translate(error) || '';\r\n}\r\n\r\n// Translate feedbacks/errors to human-readable prompts/notifications.\r\n// NOTE: this example show use of the Angular's `$localize` taggged\r\n// template literals for API message localization; other frameworks\r\n// may use their own localization serices.\r\nfunction translate(msgOrError){\r\n    if (!msgOrError) return \"\"\r\n    const { message, code } = msgOrError\r\n    return (rawMessages.checked) ?\r\n        getRawMessage(message, code) :\r\n        getLocalizedMesage(message, code)\r\n}\r\n\r\nfunction getLocalizedMesage(message, code) {\r\n    switch(message) {\r\n        // feedbacks\r\n        case \"Starting\"             : return `Starting...`;\r\n        case \"Paused\"               : return `Paused, click on the page to resume.`;\r\n        case \"ConnectReader\"        : return `Connect a card reader.`;\r\n        case \"UseCard\"              : return `Tap a card.`;\r\n        case \"UseDifferentCard\"     : return `Use a different card.`;\r\n        case \"UseDifferentCardType\" : return `Use a card of different type.`;\r\n        case \"UseSingleCard\"        : return `Use a single card.`;\r\n        // // errors\r\n        case \"BadVersion\"           : return `Incompatible client version.`;\r\n        case \"BadConnection\"        : return `Connection failure.`;\r\n        case \"BadResponse\"          : return `Service failure.`;\r\n        case \"Aborted\"              : return `The operation was aborted.`;\r\n        // Show unknown platform-generated messages with codes \"as-is\".\r\n        // The message will be in a system locale, not a browser locale.\r\n        default:\r\n            return getRawMessage(message, code)\r\n    }\r\n\r\n}\r\n\r\nfunction getRawMessage(message, code) {\r\n    return `\"${message || `Oops!`}\" (${code != null ? code.toString(16) : \"n/a\"})`;\r\n}\r\n"],"names":["_catch","body","recover","result","e","then","form","document","getElementById","_finallyRethrows","finalizer","bind","startButton","cancelButton","feedbackView","errorView","resultView","rawMessages","onclick","ac","AbortController","_temp","innerText","setCaptureActive","updateFeedbackView","updateErrorView","Promise","resolve","capture","purpose","value","cardType","signal","onFeedback","channelOptions","debug","data","JSON","stringify","_wasThrown","_result","reject","capturing","classList","toggle","disabled","abort","feedback","hidden","translate","error","msgOrError","message","code","checked","getRawMessage","getLocalizedMesage","toString"],"mappings":"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"}